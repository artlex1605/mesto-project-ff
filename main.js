(()=>{"use strict";var e=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],t=document.querySelector("#card-template").content;function r(e){e.target.classList.contains("card__like-button")&&e.target.classList.toggle("card__like-button_is-active")}function o(e,o){var n=e.name,c=e.link,a=t.querySelector(".places__item").cloneNode(!0),p=a.querySelector(".card__image"),l=a.querySelector(".card__title"),i=a.querySelector(".card__delete-button");return p.src=c,p.alt=n,l.textContent=n,i.addEventListener("click",o),a.querySelectorAll(".card__like-button").forEach((function(e){e.addEventListener("click",r)})),a}function n(e){var t=e.target.closest(".places__item");if(t){var r=t.querySelector(".card__image").src;t.remove();var o=(JSON.parse(localStorage.getItem("my-mesto-cards"))||[]).filter((function(e){return e.link!==r}));localStorage.setItem("my-mesto-cards",JSON.stringify(o))}}function c(){document.querySelectorAll(".popup").forEach((function(e){e.classList.remove("popup-visible")})),document.querySelector(".popup__input_type_name").value="",document.querySelector(".popup__input_type_description").value=""}document.querySelector(".profile"),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",c)}));var a=document.querySelector(".popup_type_edit"),p=a.querySelector(".popup__input_type_name"),l=a.querySelector(".popup__input_type_description"),i=document.querySelector(".profile__title"),s=document.querySelector(".profile__description");a.addEventListener("submit",(function(e){e.preventDefault();var t=p.value,r=l.value;i.textContent=t,s.textContent=r,localStorage.setItem("my-mesto-profile",JSON.stringify({name:t,job:r})),p.value="",l.value="",c()}));var u=document.querySelector(".popup_type_new-card"),d=u.querySelector(".popup__input_type_card-name"),_=u.querySelector(".popup__input_type_url");u.addEventListener("submit",(function(e){e.preventDefault();var t=d.value,r=_.value;if(t&&r){var a={name:t,link:r},p=o(a,n),l=document.querySelector(".places__list");l.insertBefore(p,l.firstChild);var i=JSON.parse(localStorage.getItem("my-mesto-cards"))||[];i.unshift(a),localStorage.setItem("my-mesto-cards",JSON.stringify(i)),d.value="",_.value="",c()}}));var m=document.querySelector(".places__list"),y=document.querySelector(".content"),v=JSON.parse(localStorage.getItem("my-mesto-profile"));v&&(document.querySelector(".profile__title").textContent=v.name,document.querySelector(".profile__description").textContent=v.job);var S=[],f=localStorage.getItem("my-mesto-cards");f?S=JSON.parse(f):(S=e,localStorage.setItem("my-mesto-cards",JSON.stringify(e))),S.forEach((function(e){var t=o(e,n);m.append(t)})),y.addEventListener("click",(function(e){if(e.target.classList.contains("profile__edit-button")){document.querySelector(".popup_type_edit").classList.add("popup-visible");var t=document.querySelector(".profile__title"),r=document.querySelector(".profile__description");document.querySelector(".popup__input_type_name").value=t.textContent,document.querySelector(".popup__input_type_description").value=r.textContent}if(e.target.classList.contains("profile__add-button")&&document.querySelector(".popup_type_new-card").classList.add("popup-visible"),e.target.classList.contains("card__image")){var o=document.querySelector(".popup_type_image");o.classList.add("popup-visible"),o.querySelector(".popup__image").src=e.target.src}})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&c()}))})();